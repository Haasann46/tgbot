<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Telegram Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body style="background:#0f172a;color:white;font-family:sans-serif">
  <h2>üöÄ Telegram Mini App</h2>
  <div id="info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    fetch("/api/auth", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ initData: tg.initData })
    })
    .then(r => r.json())
    .then(data => {
      document.getElementById("info").innerText =
        "‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. Telegram ID: " + data.telegram_id;
    })
    .catch(() => {
      document.getElementById("info").innerText =
        "‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏";
    });
  </script>
</body>
</html>
